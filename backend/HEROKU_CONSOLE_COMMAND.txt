Commande √† copier-coller dans la console Heroku:

node -e 'const {PrismaClient}=require("@prisma/client");const p=new PrismaClient();(async()=>{try{console.log("üîÑ Migration en cours...");await p.$executeRawUnsafe(`CREATE TABLE IF NOT EXISTS stock_movements (id TEXT NOT NULL,type TEXT NOT NULL,barcode TEXT,"productName" TEXT NOT NULL,"productReference" TEXT,size TEXT,quantity INTEGER NOT NULL,"oldStock" INTEGER,"newStock" INTEGER,"orderNumber" TEXT,"trackingNumber" TEXT,notes TEXT,"operationType" TEXT,"createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,CONSTRAINT stock_movements_pkey PRIMARY KEY (id));`);await p.$executeRawUnsafe(`CREATE INDEX IF NOT EXISTS stock_movements_createdAt_idx ON stock_movements("createdAt");`);await p.$executeRawUnsafe(`CREATE INDEX IF NOT EXISTS stock_movements_type_idx ON stock_movements(type);`);await p.$executeRawUnsafe(`CREATE INDEX IF NOT EXISTS stock_movements_operationType_idx ON stock_movements("operationType");`);console.log("‚úÖ Migration r√©ussie!");}catch(e){if(e.message.includes("already exists")||e.message.includes("duplicate")||e.message.includes("relation"))console.log("‚ÑπÔ∏è Table existe d√©j√†");else console.error("‚ùå Erreur:",e.message);}finally{await p.$disconnect();}})();'
